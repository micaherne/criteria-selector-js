<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
  <script src="lib/jstree/jquery.jstree.js"></script>
  <script src="lib/jquery.strath.criteriaeditor.js"></script>
  <script src="lib/json2.js"></script>
  <script>

    function autocomplete(request, callback) {
        var url = "http://localhost/moodle/mod/strathcom/criteria2/ajax.php?autocomplete=" + request.term;
		$.ajax(url, {
			method: 'GET',
			success: callback,
			dataType: 'json'
		});
    }
  
    $(document).ready(function() {
    	var editor = $('textarea').criteriaeditor({ajaxScript: 'http://localhost/moodle/mod/strathcom/criteria2/ajax.php'});

    	editor.criteriaeditor('inputField').autocomplete({
            source: autocomplete,
                 position: {of: editor.criteriaeditor('containerDiv') }});

    });

   </script>
   <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/base/jquery-ui.css" type="text/css" />
<link type="text/css" rel="stylesheet" media="all" href="lib/widget-style.css" />
<style type="text/css">
	.warning { color: red; height: 16px; font-weight: bold; padding: 0 3px; margin: 0 3px; border: 1px solid red; }
	.strath-criterion { cursor: pointer; }
	.criterion-icon { margin-right: 3px; }
	.criterion-controls { margin: 0 3px; float: right;}
	.criterion-settings { position: absolute; display: none; 
		border: 1px solid black; background: white;
		padding: 1em; }
</style>
<title>Criteria selector prototype</title>
</head>
<body>

	<form>
		<textarea></textarea>
	</form>

</body>
</html>